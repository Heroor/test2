<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <title>Document</title>
  <style>
  * {
    margin: 0;
    padding: 0;
    list-style: none;
    font-size: 20px;
  }

  .box {
    border: 1px solid #aaa;
    margin-bottom: 20px;
  }

  .title {
    line-height: 40px;
  }
  /*****************************横向**********************************/

  .box1 {
    /* 父容器溢出隐藏 */
    overflow: hidden;
  }

  .ul1 {
    /* 清除浮动 也可以其他方式 */
    float: left;
    padding: 10px;
  }

  .ul1 li {
    /* 横向滑动时 需要设置浮动 */
    float: left;
    padding: 0 10px;
  }
  /******************************竖向*********************************/

  .box2 {
    /* 设置父容器高度 */
    height: 200px;
    /* 父容器溢出隐藏 */
    overflow: hidden;
  }

  .ul2 li {
    padding: 10px;
  }
  /***************************************************************/
  </style>
</head>

<body>
  <p class="title">横向</p>
  <div class="box box1">
    <ul class="ul1">
      <li>lorem</li>
      <li>lorem</li>
      <li>lorem</li>
      <li>lorem</li>
      <li>lorem</li>
      <li>lorem</li>
      <li>lorem</li>
      <li>lorem</li>
      <li>lorem</li>
    </ul>
  </div>
  <p class="title">竖向</p>
  <div class="box box2">
    <ul class="ul2">
      <li>lorem lorem lorem lorem</li>
      <li>lorem lorem lorem lorem</li>
      <li>lorem lorem lorem lorem</li>
      <li>lorem lorem lorem lorem</li>
      <li>lorem lorem lorem lorem</li>
      <li>lorem lorem lorem lorem</li>
      <li>lorem lorem lorem lorem</li>
      <li>lorem lorem lorem lorem</li>
      <li>lorem lorem lorem lorem</li>
    </ul>
  </div>
  <p class="title">请打开浏览器移动端模式，刷新查看效果</p>
</body>
<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
<script src="./touchScroll.js"></script>
<script>
/* !
 * jQuery扩展滑动插件
 * touchScroll.js v1.1.1
 * copyright-BenjaVan
 * 2017.4.23
 */

(function () {
  //返回构造函数
  jQuery.touchScroll = function (config) {
    return new jQuery.touchScroll.init(config);
  };

  //构造实例
  jQuery.touchScroll.init = function (config) {
    this.swipeDistance = +config.swipeDistance; //缓冲距离
    this.swipeJQDom = jQuery(config.swipeJQDom); //操作的元素
    this.swipeType = (config.swipeType || 'X').toUpperCase(); //滑动方向
    this.type = this.parseType(this.swipeType); //转换宽高类型
    this.innerHW = this.swipeJQDom.children()[this.type](); //内部元素的宽或高
    this.posi = 0; //记录位置
    this.swipe();
  };

  // 添加原型
  scrollInit = jQuery.touchScroll.init;
  scrollInit.prototype = {
    constructor: jQuery.touchScroll.init,

    //移动元素
    moveSonDom: function (dis) {
      this.swipeJQDom.children()
        .css({
          'transform': 'translate' + this.swipeType + '(' + dis + 'px)',
          'transition': 'none'
        });
    },

    //恢复元素位置
    resetDom: function () {
      var type = this.type;
      var len = null;

      if (this.posi > 0) {
        len = 0;
      } else if (this.posi < (this.swipeJQDom[type]() - this.innerHW)) {
        len = this.swipeJQDom[type]() - this.innerHW;
      }
      if (len !== null) {
        this.swipeJQDom.children()
          .css({
            'transform': 'translate' + this.swipeType + '(' + len + 'px)',
            'transition': 'all .2s'
          });
        this.posi = len;
      }
    },

    //滑动事件
    swipe: function () {
      var JQDom = this.swipeJQDom; //操作的元素
      var swipeType = this.swipeType; //滑动方向

      var start,
        move,
        distance,
        newDis = 0,
        that = this;

      //父容器比元素大则不设置拖动
      if (this.swipeJQDom[this.type]() > this.innerHW) {
        return;
      }

      JQDom.on('touchstart', function (e) {
        start = e.originalEvent.touches[0]['client' + swipeType];
      });

      JQDom.on('touchmove', function (e) {
        move = e.originalEvent.touches[0]['client' + swipeType];
        distance = move - start;
        newDis = distance + that.posi;
        if (newDis > that.swipeDistance) {
          newDis = that.swipeDistance;
        }
        if (newDis < (that.swipeJQDom[that.type]() - that.innerHW) - that.swipeDistance) {
          newDis = (that.swipeJQDom[that.type]() - that.innerHW) - that.swipeDistance;
        }
        that.moveSonDom(newDis);
      });

      JQDom.on('touchend', function () {
        that.posi = newDis;
        that.resetDom();
        newDis = that.posi;
      });
    },

    //方向转换
    parseType: function (str) {
      return str === 'X' ? 'outerWidth' : 'outerHeight';
    }
  };
}());
</script>
<script>
$(function () {
  // 横向滑动
  // 需要设置ul长度
  var width = 0;
  $(".ul1 li").each(function () {
    width += $(this).outerWidth(true);
  })
  $(".ul1").width(Math.ceil(width));

  jQuery.touchScroll({
    swipeJQDom: '.box1', //父容器
    swipeDistance: '80', //缓冲距离
    // swipeType: 'x' //移动方向 此项不填写 默认为x
  })
})


$(function () {
  // 竖向滑动
  // 不需要设置ul
  jQuery.touchScroll({
    swipeJQDom: '.box2', //父容器
    swipeDistance: '100', //缓冲距离
    swipeType: 'y' //移动方向 此项不填写 默认为x
  })
})
</script>

</html>